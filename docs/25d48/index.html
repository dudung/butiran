<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>script loader and runner | butiran</title>
<link rel=stylesheet href=/butiran/css/main.min.5d949e138e137f26bbbc6fbe151c3e39ca49a674bd5c6f0f3a9ff79176ee1043.css integrity="sha256-XZSeE44Tfya7vG++FRw+OcpJpnS9XG8POp/3kXbuEEM=" crossorigin=anonymous><script src=/butiran/js/main.23cd0c7d837263b9eaeb96ee2d9ccfa2969daa3fa00fa1c1fe8701a9b87251a1.js integrity="sha256-I80MfYNyY7nq65buLZzPopadqj+gD6HB/ocBqbhyUaE=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css></head><body><header><link rel=stylesheet href='/butiran/css/header.css?v=1761876085'><h1>butiran</h1><nav><ul><li><a href=/butiran/>Home</a></li></ul></nav></header><main><head><link rel=stylesheet href='/butiran/css/notes.css?v=1761876085'></head><div class=note-container><h1 class=note-title>script loader and runner</h1><div class=info-after-title><ul class=authors-container><li class=author><a href=https://dudung.github.io/butiran/authors/viridi/>Sparisoma Viridi</a></li></ul><div class=date-reading-time-edit><time datetime="2025-04-16T16:26:38 07:00">16 Apr 2025</time>
&#183;
2 mins read
&#183;
<a class=link href=npprel:///25/d/48-script-loader-and-runner.md>edit</a></div></div><div class=note-content><h2 id=purpose>purpose</h2><ul><li>The loader loads JavaScript files sfiles from the <code>static/js</code> folder.</li><li>The runner runs JavaScript within a Hugo post or note.</li></ul><h2 id=script-loader>script loader</h2><p>It is saved as <code>loader.html</code> in folder <code>layouts/shortcodes/script</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{{ $baseURL := site.BaseURL }}
</span></span><span style=display:flex><span>{{ range split .Inner &#34;\n&#34; }}
</span></span><span style=display:flex><span>  {{- $script := trim . &#34; \r&#34; -}} <span style=color:#75715e>&lt;!-- Trim spaces and possible trailing \r --&gt;</span>
</span></span><span style=display:flex><span>  {{- if ne $script &#34;&#34; -}}
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ printf &#34;</span><span style=color:#960050;background-color:#1e0010>%</span><span style=color:#a6e22e>sjs</span><span style=color:#960050;background-color:#1e0010>/%</span><span style=color:#a6e22e>s</span><span style=color:#960050;background-color:#1e0010>?</span><span style=color:#a6e22e>v</span><span style=color:#f92672>=</span><span style=color:#e6db74>1&#34;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>baseURL</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>script</span> <span style=color:#960050;background-color:#1e0010>|</span> <span style=color:#a6e22e>relURL</span> <span style=color:#960050;background-color:#1e0010>}}&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>  {{- end -}}
</span></span><span style=display:flex><span>{{ end }}
</span></span></code></pre></div><h2 id=script-runner>script runner</h2><p>It is saved as <code>runner.html</code> in folder <code>layouts/shortcodes/script</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{{ $id := .Get &#34;id&#34; | default &#34;script-container&#34; }}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ $id }}&#34;</span>&gt;&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>  document.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#34;DOMContentLoaded&#34;</span>, <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>    {{ .<span style=color:#a6e22e>Inner</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>safeJS</span> }}
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span></code></pre></div><h2 id=result>result</h2><p>Following is an example.</p><script src="/butiran/js/tests.js?v=1761876082"></script><div id=script-0></div><script>document.addEventListener("DOMContentLoaded",function(){const el=document.getElementById("script-0");with(el.style)width="180px",height="60px",border="2px #ccc solid",background="#eee",textAlign="center",color="blue",fontWeight="bold",fontSize="150%";el.innerHTML=hello("World")})</script><p>And the code to produce it is as follow.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>{{&lt; <span style=color:#a6e22e>script</span><span style=color:#f92672>/</span><span style=color:#a6e22e>loader</span> &gt;}}
</span></span><span style=display:flex><span><span style=color:#a6e22e>tests</span>.<span style=color:#a6e22e>js</span>
</span></span><span style=display:flex><span>{{&lt; <span style=color:#f92672>/</span><span style=color:#a6e22e>script</span><span style=color:#f92672>/</span><span style=color:#a6e22e>loader</span> &gt;}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{&lt; <span style=color:#a6e22e>script</span><span style=color:#f92672>/</span><span style=color:#a6e22e>runner</span> <span style=color:#a6e22e>id</span>=<span style=color:#e6db74>&#34;script-0&#34;</span> &gt;}}
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>el</span> = <span style=color:#a6e22e>document</span>.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#34;script-0&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>with</span>(<span style=color:#a6e22e>el</span>.<span style=color:#a6e22e>style</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>width</span> = <span style=color:#e6db74>&#34;180px&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>height</span> = <span style=color:#e6db74>&#34;60px&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>border</span> = <span style=color:#e6db74>&#34;2px #ccc solid&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>background</span> = <span style=color:#e6db74>&#34;#eee&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textAlign</span> = <span style=color:#e6db74>&#34;center&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>color</span> = <span style=color:#e6db74>&#34;blue&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fontWeight</span> = <span style=color:#e6db74>&#34;bold&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fontSize</span> = <span style=color:#e6db74>&#34;150%&#34;</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>el</span>.<span style=color:#a6e22e>innerHTML</span> = <span style=color:#a6e22e>hello</span>(<span style=color:#e6db74>&#34;World&#34;</span>);
</span></span><span style=display:flex><span>{{&lt; <span style=color:#f92672>/</span><span style=color:#a6e22e>script</span><span style=color:#f92672>/</span><span style=color:#a6e22e>runner</span> &gt;}}
</span></span></code></pre></div><p>And content of <code>tests.js</code> saved in <code>static/js</code> folder is as follow.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>/* tests.js */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>hello</span>(<span style=color:#a6e22e>name</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Hello, &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>name</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;!&#34;</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Notice that the runner can access the <code>hello()</code> function, which is previously loaded by the loader.</p><h2 id=notes>notes</h2><ul><li>In the future, development of JS code in a note will use these shortcodes.</li></ul></div></div></main><footer><link rel=stylesheet href='/butiran/css/footer.css?v=1761876085'><p>Copyright Sparisoma Viridi 2025<a href=/butiran/h2/ style=cursor:text>.</a>
All rights reserved.
Unless stated otherwise in a note.</p></footer></body></html>