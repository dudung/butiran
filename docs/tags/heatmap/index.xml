<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Heatmap on butiran</title><link>http://localhost:1313/butiran/tags/heatmap/</link><description>Recent content in Heatmap on butiran</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Sat, 17 May 2025 03:39:42 +0700</lastBuildDate><atom:link href="http://localhost:1313/butiran/tags/heatmap/index.xml" rel="self" type="application/rss+xml"/><item><title>heatmap draft</title><link>http://localhost:1313/butiran/25e31/</link><pubDate>Sat, 17 May 2025 03:39:42 +0700</pubDate><guid>http://localhost:1313/butiran/25e31/</guid><description>&lt;p&gt;It is a draft of a heatmap for visualization of some sensors reading.&lt;/p&gt;
&lt;h2 id="demo"&gt;demo&lt;/h2&gt;
&lt;p&gt;Following is a demo in draft stage.&lt;/p&gt;


&lt;div id="cnt1"&gt;&lt;/div&gt;

&lt;script&gt;
 document.addEventListener("DOMContentLoaded", function () {
 
class Sensor {
 constructor(id, state, x, y, temp) {
 this.id = id;
 this.state = state;
 this.x = x;
 this.y = y;
 this.temp = temp;
 
 this.element = document.createElement("label");
 this.element.style.display = "flex";

 const input = document.createElement("input");
 input.type = "checkbox";
 input.id = this.id;
 input.checked = state;

 const text = document.createElement("span");
 text.innerHTML = "Sensor " + this.id.slice(-2);

 this.element.appendChild(input);
 this.element.appendChild(text);
 }

 appendTo(parent) {
 parent.appendChild(this.element);
 }
 
 addEventListener(event, func) {
 const el = this.element.querySelector("#" + this.id);
 el.addEventListener(event, func);
 }
}

function transform(a, amin, amax, AMIN, AMAX) {
 let b = (a - amin) / (amax - amin);
 b *= (AMAX - AMIN);
 b += AMIN;
 return b;
}

function clear(canvas) {
 const ctx = canvas.getContext("2d");
 ctx.clearRect(0, 0, canvas.width, canvas.height);
}

function draw(sensor, canvas, color) {
 const xmin = 0;
 const xmax = 40;
 const ymin = 0;
 const ymax = 40;
 
 const XMIN = 0;
 const XMAX = canvas.width;
 const YMAX = canvas.height;
 const YMIN = 0;
 
 const X = transform(sensor.x, xmin, xmax, XMIN, XMAX);
 const Y = transform(sensor.y, ymin, ymax, YMIN, YMAX);
 
 const ctx = canvas.getContext("2d");
 ctx.fillStyle = color;
 ctx.beginPath();
 ctx.arc(X, Y, 4, 0, 2*Math.PI);
 ctx.fill();
 ctx.strokeStyle = color;
 ctx.beginPath();
 ctx.arc(X, Y, 4, 0, 2*Math.PI);
 ctx.stroke();
 ctx.font = "12px Arial";
 ctx.fillText("" + sensor.temp, X + 10, Y + 4);
}

function toggleCheck(e) {
 update();
 
 for(let s of sensors) {
 const el = document.getElementById(s.id);
 if(el.checked) {
 draw(s, can, "#f00");
 } else {
 draw(s, can, "#fff");
 }
 } 
}

function update() {
 const size = 40;
 const cellSize = can.width / size;
 
 // Step 1: Sparse temperature data
 const knownPoints = [];
 let N = 0;
 for(let s of sensors) {
 const el = document.getElementById(s.id);
 if(el.checked) {
 knownPoints.push(
 {
 x: s.x,
 y: s.y,
 temp: s.temp,
 }
 )
 N++;
 }
 }
 
 // Step 2: Fill full grid using nearest known point
 function getNearestTemp(x, y) {
 let nearest = knownPoints[0];
 let minDist = Infinity;
 for (const p of knownPoints) {
 const dist = (x - p.x) ** 2 + (y - p.y) ** 2;
 if (dist &lt; minDist) {
 minDist = dist;
 nearest = p;
 }
 }
 return nearest.temp;
 }
 
 if(N &gt; 0) {
 // Step 3: Draw the heatmap
 const ctx = can.getContext("2d");
 for (let y = 0; y &lt; size; y++) {
 for (let x = 0; x &lt; size; x++) {
 const temp = getNearestTemp(x, y);
 const color = `hsl(${(1 - temp / 50) * 240}, 100%, 50%)`; // 0–50°C range → blue to red
 ctx.fillStyle = color;
 ctx.fillRect(x * cellSize, y * cellSize, cellSize, cellSize);
 }
 }
 }
}

const cnt = document.getElementById("cnt1");

with(cnt.style) {
 border = "1px solid #888";
 width = "400px";
 height = "410px";
 display = "flex";
}

const leftDiv = document.createElement("div");
with(leftDiv.style) {
 background = "#eee";
 flex = "1";
}

const rightDiv = document.createElement("div");
with(rightDiv.style) {
 background = "#eee";
 flex = "3";
}

const can = document.createElement("canvas");
can.width = "300";
can.height = "300";
can.style.width = can.width + "px";
can.style.height = can.height + "px";
can.style.background = "white";
can.style.marginTop = "2em";
can.style.marginRight = "0.5em";

const Ns = 16;
const sx = [
 5, 15, 25, 35,
 5, 15, 25, 35,
 5, 15, 25, 35,
 5, 15, 25, 35,
];
const sy = [
 5, 5, 5, 5,
 15, 15, 15, 15,
 25, 25, 25, 25,
 35, 35, 35, 35,
];
const temp = [
 10, 10, 10, 10,
 20, 20, 20, 10,
 30, 20, 10, 10,
 40, 40, 30, 20,
];

const sensors = [];
for(let i = 0; i &lt; Ns; i++) {
 ni = "" + i;
 if(i &lt; 10) ni = "0" + ni;
 const s = new Sensor("sensor" + ni, false, sx[i], sy[i], temp[i]);
 s.addEventListener("click", toggleCheck);
 sensors.push(s);
}

for(let s of sensors) {
 draw(s, can, "#fff");
}

const label = document.createElement("span");
label.innerHTML = "Temperature";
label.style.paddingLeft = "0.5em";
label.style.fontWeight = "bold";

const img = document.createElement("img");
//img.src = "https://github.com/user-attachments/assets/c3e285de-66d9-445a-bd51-ec84cfd935c2";
img.width = "300";
img.height = "410";
img.style.width = "300px";
img.style.height = "410px";
img.style.border = "1px solid #888";

cnt.appendChild(leftDiv);
 leftDiv.append(label);
 for(let s of sensors) {
 s.appendTo(leftDiv);
 }
cnt.appendChild(rightDiv);
 rightDiv.appendChild(can);
cnt.appendChild(img);

 });
&lt;/script&gt;

&lt;ul&gt;
&lt;li&gt;Image url 
&lt;a

	
	
		href = "https://github.com/user-attachments/assets/c3e285de-66d9-445a-bd51-ec84cfd935c2"

		

	

	

		target = "_blank"
		rel = "nofollow noopener noreferrer"

		&gt;
	
	
	&lt;span&gt;
		https://github.com/user-attachments/assets/c3e285de-66d9-445a-bd51-ec84cfd935c2 &lt;i class="fa fa-external-link" style="font-size:14px"&gt;&lt;/i&gt;
	&lt;/span&gt;
 
&lt;/a&gt;
 [20250517].&lt;/li&gt;
&lt;li&gt;Story url 
&lt;a

	
	
		href = "https://medium.com/p/b948e6cc4240"

		

	

	

		target = "_blank"
		rel = "nofollow noopener noreferrer"

		&gt;
	
	
	&lt;span&gt;
		https://medium.com/p/b948e6cc4240 &lt;i class="fa fa-external-link" style="font-size:14px"&gt;&lt;/i&gt;
	&lt;/span&gt;
 
&lt;/a&gt;
 [20250517].&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="notes"&gt;notes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;This note is part of research project led by 
&lt;a

	
	
		href = "/butiran/authors/purqon"

		

	

	&gt;
	
	
	&lt;span&gt;
		Acep Purqon
	&lt;/span&gt; 
 
&lt;/a&gt;
 &lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/li&gt;
&lt;li&gt;Notes related to js are 
&lt;a

	
	
		href = "/butiran/25c22"

		

	

	&gt;
	
	
	&lt;span&gt;
		25c22
	&lt;/span&gt; 
 
&lt;/a&gt;
, 
&lt;a

	
	
		href = "/butiran/25c36"

		

	

	&gt;
	
	
	&lt;span&gt;
		25c36
	&lt;/span&gt; 
 
&lt;/a&gt;
, 
&lt;a

	
	
		href = "/butiran/25c39"

		

	

	&gt;
	
	
	&lt;span&gt;
		25c39
	&lt;/span&gt; 
 
&lt;/a&gt;
, 
&lt;a

	
	
		href = "/butiran/25c52"

		

	

	&gt;
	
	
	&lt;span&gt;
		25c52
	&lt;/span&gt; 
 
&lt;/a&gt;
.&lt;/li&gt;
&lt;li&gt;Current interpolation &lt;sup id="fnref:2"&gt;&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt; can be advanced and further improved to give better insight.&lt;/li&gt;
&lt;li&gt;It is necessary to dig deeper the topic &lt;sup id="fnref:3"&gt;&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref"&gt;3&lt;/a&gt;&lt;/sup&gt;.&lt;/li&gt;
&lt;li&gt;Read material about coginitive digital twin &lt;sup id="fnref:4"&gt;&lt;a href="#fn:4" class="footnote-ref" role="doc-noteref"&gt;4&lt;/a&gt;&lt;/sup&gt; and try to understand it for the sub working project.&lt;/li&gt;
&lt;li&gt;There is also reading material that easier to read &lt;sup id="fnref:5"&gt;&lt;a href="#fn:5" class="footnote-ref" role="doc-noteref"&gt;5&lt;/a&gt;&lt;/sup&gt;, hopefully.&lt;/li&gt;
&lt;li&gt;Another concept to learn is digital identity &lt;sup id="fnref:6"&gt;&lt;a href="#fn:6" class="footnote-ref" role="doc-noteref"&gt;6&lt;/a&gt;&lt;/sup&gt;, that would be better if also integrated to the system.&lt;/li&gt;
&lt;li&gt;For non-numan, there is also non-human identity management &lt;sup id="fnref:7"&gt;&lt;a href="#fn:7" class="footnote-ref" role="doc-noteref"&gt;7&lt;/a&gt;&lt;/sup&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="refs"&gt;refs&lt;/h2&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Sparisoma Viridi, &amp;ldquo;purqon ag res&amp;rdquo;, butiran, 11 Dec 2024, url 
&lt;a

	
	
		href = "https://dudung.github.io/butiran/24l06/"

		

	

	

		target = "_blank"
		rel = "nofollow noopener noreferrer"

		&gt;
	
	
	&lt;span&gt;
		https://dudung.github.io/butiran/24l06/ &lt;i class="fa fa-external-link" style="font-size:14px"&gt;&lt;/i&gt;
	&lt;/span&gt;
 
&lt;/a&gt;
 [20250517].&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;</description></item></channel></rss>